<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>
    <style>

    rect {
        fill: navy;
    }

    h2 {
        text-align: center;
    }
    </style>
    <script type="text/javascript">
        function draw(data) {
            /*
            D3.js setup code
            */
            "use strict";//give error if javascript could silently fail
            var margin = 75,
                width = 1400 - margin,
                height = 600 - margin;

            debugger;

            d3.select('body')
                .append('h2')
                .text("Average Debt Consolidation Loan by Income Bracket Granted by Prosper Loans");

            /*below sets up the size and such of our chart and assigns it
            to an svg element*/

            var svg = d3.select("body")
                .append("svg")
                    .attr("width", width + margin)
                    .attr("height", height + margin)
                .append('g')
                    .attr('class','chart');

            /* d3.js Chart construction code*/

            var myChart = new dimple.chart(svg, data);
            var x = myChart.addCategoryAxis("x", "YearlyIncomeRounded");
            var y = myChart.addMeasureAxis("y", "mean_original_loan");

            x.addOrderRule("YearlyIncomeRounded", false);

            x.title = "Yearly Income Rounded to Lowest $10,000";
            x.tickFormat = ',';
            y.title = 'Mean Loan Amount ($)';
            y.tickFormat = ',.f';

            x.fontSize = 16;
            y.fontSize = 16;

            var s3 = myChart.addSeries(null, dimple.plot.bar);

            /* Draw the graph*/
            myChart.draw();

        };
    </script>
</head>
<body>
    <script type="text/javascript">
    /*
    Use D3 (not dimple.js) to load the CSV file
    and pass the contents of it to the draw function
    */
    d3.csv("MeanLoanAmountProsperLoanData.csv", draw);
    </script>
</body>
</html>
